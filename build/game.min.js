var Game={nextId:0,pieces:[],el:document.getElementById("room"),add:function(e){e.create(),null===e.id?(e.id=this.nextId,this.pieces[this.nextId]=e,this.nextId++):this.pieces[e.id]=e,this.show(e)},addAll:function(e){for(var t=0,i=e.length;i>t;t++)this.add(e[t])},remove:function(e){this.el.removeChild(e.el),delete this.pieces[e.id]},hide:function(e){this.el.removeChild(e.el)},show:function(e){this.el.appendChild(this.pieces[e.id].el)},step:function(){for(var e=0,t=this.pieces.length;t>e;e++)this.pieces[e].step()}},TextBox={el:document.getElementById("text"),last:null,push:function(e){var t=document.createElement("div");t.innerHTML=e,t.className="mess",this.el.insertBefore(t,this.last),this.last=t}};TextBox.push('Wellcome to jarl <br> push "?" for instructions'),TextBox.push("You entered level 1");var Extendable={extend:function(e){var t=Object.create(this);for(var i in e)t[i]=e[i];return"construct"in t&&t.construct(),t}},Gamepiece=Extendable.extend({x:0,y:0,id:null,className:"fixed trans",create:function(){this.el=document.createElement("img"),this.el.className=this.className,this.el.src=this.src,this.step()},step:function(){var e=this.fliped?" fliped":"";this.el.style.left=this.x+"px",this.el.style.top=this.y+"px",this.el.className=this.className+e},move:function(e,t){this.x=e,this.y=t,this.step()},moveRel:function(e,t){this.x+=e,this.y+=t,this.step()}}),Player=Gamepiece.extend({type:"player",src:"night.min.gif"});Game.add(Player);var Wall=Gamepiece.extend({src:"wall.min.gif"}),Door=Gamepiece.extend({src:"doorClosed.min.gif"}),Room=Extendable.extend({walls:[],pieces:[],make:function(e,t,i,s){room=Object.create(this),room.x=e,room.y=t,room.height=i,room.width=s},createHozLine:function(e,t,i,s){for(var n=Math.abs(t-i),l=[];n--;){var a=Wall.extend({x:t+n,y:e});l[n]=a}l[Math.floor((t+i)/2)]=s,this.walls.concat(l)},createVertLine:function(e,t,i,s){for(var n=Math.abs(t-i),l=[];n--;){var a=Wall.extend({x:e,y:t+n});l[n]=a}l[Math.floor((t+i)/2)]=s,this.walls.concat(l)},create:function(){}});